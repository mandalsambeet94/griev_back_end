# AWS Lambda Specific Configuration
spring:
  config:
    activate:
      on-profile: aws
  
  # Database Configuration for AWS RDS
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/grievance_system}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:}
  
  # JPA Configuration for AWS
  jpa:
    hibernate:
      ddl-auto: validate  # Never use 'update' in production
    show-sql: false
  
  # Cloud Configuration
  cloud:
    aws:
      region:
        static: ${SERVER_REGION:ap-south-1}
      stack:
        auto: false
      credentials:
        use-default-aws-credentials-chain: true

# Server Configuration for Lambda
server:
  port: 0  # Required for AWS Lambda
  tomcat:
    max-connections: 100
    max-keep-alive-requests: 100
    connection-timeout: 29000
    keep-alive-timeout: 29000

# AWS Lambda Specific
lambda:
  memory: ${AWS_LAMBDA_MEMORY:512}
  timeout: ${AWS_LAMBDA_TIMEOUT:30}

# Actuator Configuration (for health checks)
management:
  endpoint:
    health:
      show-details: always
      probes:
        enabled: true
  endpoints:
    web:
      exposure:
        include: health,info,metrics
      base-path: /actuator
      path-mapping:
        health: health

# Logging for AWS
logging:
  pattern:
    level: "%5p [%X{AWSRequestId}]"